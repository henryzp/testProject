<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>购物车</title>
    <link rel="stylesheet" href="css/common.css" />
    <link rel="stylesheet" href="css/car.css" />
    <script src="js/jquery-1.10.2.min.js"></script>
</head>

<body>
    <div class="page-head">
        <div class="layout">
            <div class="clearfix">
                <div class="head-icon">
                    <a href="#"><img src="images/de-head.png" alt="" /></a>
                </div>
            </div>
            <div class="clearfix">
                <div class="logo">
                    <a href="#"><img src="images/logo1.png"></a>
                </div>
                <div class="nav-box">
                    <ul class="nav clearfix">
                        <li class="current"><a href="#">首页</a></li>
                        <li><a href="#">运动课程</a></li>
                        <li><a href="#">运动旅行</a></li>
                        <li><a href="#">运动资讯</a></li>
                        <li><a href="#">关于我们</a></li>
                    </ul>
                </div>
                <div class="login">
                    <a href="#" class="opt">注册</a>
                    <a href="#" class="opt">登录</a>
                    <a class="opt cart" href="#"></a>
                </div>
            </div>
        </div>
    </div>
    <div id="content" class="clearfix">
        <div class="car-box">
            <div class="car-table layout">
                <h3>购物车</h3>
                <div class="m-checkall">
                    <table>
                        <colgroup>
                            <col width="40" />
                            <col width="150" />
                            <col />
                            <col width="150" />
                            <col width="150" />
                            <col width="150" />
                            <col width="150" />
                            <col width="180" />
                        </colgroup>
                        <tbody>
                            <tr>
                                <td>
                                    <input class="checkbox J_check-all" type="checkbox">
                                </td>
                                <td>全选</td>
                                <td>商品名称</td>
                                <td>类型</td>
                                <td>单价</td>
                                <td>人数</td>
                                <td>金额</td>
                                <td>操作</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="car-list-new">
                    <table>
                        <colgroup>
                            <col width="40" />
                            <col width="150" />
                            <col />
                            <col width="150" />
                            <col width="150" />
                            <col width="150" />
                            <col width="150" />
                            <col width="180" />
                        </colgroup>
                        <thead>
                            <tr>
                                <th>
                                    <input class="teach-checkbox J_check-elem-teach" type="checkbox">
                                </th>
                                <th colspan="7">教练ID:1234580980</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <input class="J_check-elem" type="checkbox">
                                </td>
                                <td>
                                    <a href="###">
                                        <img src="http://placehold.it/82x82" alt="">
                                    </a>
                                </td>
                                <td>希腊潜水</td>
                                <td>
                                    两天一夜
                                </td>
                                <td>
                                    <span class="singlePrice">500</span>/人
                                </td>
                                <td>
                                    <div class="clearfix">
                                        <span class="car-btn-in J_minus-btn">-</span>
                                        <div class="car-input-num">
                                            <input class="J_num-input" type="text" value="1">
                                        </div>
                                        <span class="car-btn-plus J_plus-btn">+</span>
                                    </div>
                                </td>
                                <td>
                                    <span class="totalPrice">500</span>元
                                </td>
                                <td>
                                    <a class="ml_10 J_del-row" href="javascript:;">[删除]</a>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input class="J_check-elem" type="checkbox">
                                </td>
                                <td>
                                    <a href="###">
                                        <img src="http://placehold.it/82x82" alt="">
                                    </a>
                                </td>
                                <td>希腊潜水</td>
                                <td>
                                    两天一夜
                                </td>
                                <td>
                                    <span class="singlePrice">500</span>/人
                                </td>
                                <td>
                                    <div class="clearfix">
                                        <span class="car-btn-in J_minus-btn">-</span>
                                        <div class="car-input-num">
                                            <input class="J_num-input" type="text" value="1">
                                        </div>
                                        <span class="car-btn-plus J_plus-btn">+</span>
                                    </div>
                                </td>
                                <td>
                                    <span class="totalPrice">500</span>元
                                </td>
                                <td>
                                    <a class="ml_10 J_del-row" href="javascript:;">[删除]</a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="car-list-new">
                    <table>
                        <colgroup>
                            <col width="40" />
                            <col width="150" />
                            <col />
                            <col width="150" />
                            <col width="150" />
                            <col width="150" />
                            <col width="150" />
                            <col width="180" />
                        </colgroup>
                        <thead>
                            <tr>
                                <th>
                                    <input class="teach-checkbox J_check-elem-teach" type="checkbox">
                                </th>
                                <th colspan="7">教练ID:1234580980</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <input class="J_check-elem" type="checkbox">
                                </td>
                                <td>
                                    <a href="###">
                                        <img src="http://placehold.it/82x82" alt="">
                                    </a>
                                </td>
                                <td>希腊潜水</td>
                                <td>
                                    两天一夜
                                </td>
                                <td>
                                    <span class="singlePrice">500</span>/人
                                </td>
                                <td>
                                    <div class="clearfix">
                                        <span class="car-btn-in J_minus-btn">-</span>
                                        <div class="car-input-num">
                                            <input class="J_num-input" type="text" value="1">
                                        </div>
                                        <span class="car-btn-plus J_plus-btn">+</span>
                                    </div>
                                </td>
                                <td>
                                    <span class="totalPrice">500</span>元
                                </td>
                                <td>
                                    <a class="ml_10 J_del-row" href="javascript:;">[删除]</a>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input class="J_check-elem" type="checkbox">
                                </td>
                                <td>
                                    <a href="###">
                                        <img src="http://placehold.it/82x82" alt="">
                                    </a>
                                </td>
                                <td>希腊潜水</td>
                                <td>
                                    两天一夜
                                </td>
                                <td>
                                    <span class="singlePrice">500</span>/人
                                </td>
                                <td>
                                    <div class="clearfix">
                                        <span class="car-btn-in J_minus-btn">-</span>
                                        <div class="car-input-num">
                                            <input class="J_num-input" type="text" value="1">
                                        </div>
                                        <span class="car-btn-plus J_plus-btn">+</span>
                                    </div>
                                </td>
                                <td>
                                    <span class="totalPrice">500</span>元
                                </td>
                                <td>
                                    <a class="ml_10 J_del-row" href="javascript:;">[删除]</a>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input class="J_check-elem" type="checkbox">
                                </td>
                                <td>
                                    <a href="###">
                                        <img src="http://placehold.it/82x82" alt="">
                                    </a>
                                </td>
                                <td>希腊潜水</td>
                                <td>
                                    两天一夜
                                </td>
                                <td>
                                    <span class="singlePrice">500</span>/人
                                </td>
                                <td>
                                    <div class="clearfix">
                                        <span class="car-btn-in J_minus-btn">-</span>
                                        <div class="car-input-num">
                                            <input class="J_num-input" type="text" value="1">
                                        </div>
                                        <span class="car-btn-plus J_plus-btn">+</span>
                                    </div>
                                </td>
                                <td>
                                    <span class="totalPrice">500</span>元
                                </td>
                                <td>
                                    <a class="ml_10 J_del-row" href="javascript:;">[删除]</a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="car-opt-box">
                    <div class="car-opt-left">
                        <input type="checkbox" class="checkbpx J_check-all" />
                        <span>全选</span>
                        <span class="delete">删除所选</span>
                    </div>
                    <div class="car-btns-new">
                        <span class="mr">已选产品<i class="red J_selected-num">0</i>件</span>
                        <span class="mr">
                            <span>合计：</span>
                        <span class="red J_selected-price">￥0</span>
                        </span>
                        <a class="btn btn2" href="javascript:;">结算购物车</a>
                    </div>
                </div>
            </div>
            <script>
            //购物车的一些操作
            $(function() {
                //数字变化
                $(".J_num-input").on("keyup", function() {
                    var num = $(this).val(),
                        $parent = $(this).parents("tr"),
                        $singlePrice = $parent.find(".singlePrice"),
                        $totalPrice = $parent.find(".totalPrice");
                    num = num.replace(/[^(\d+\.)]/g, "");
                    $(this).val(num);
                    if (num == "") {
                        $totalPrice.html("0")
                    } else {
                        $totalPrice.html(num * $singlePrice.html());
                    }
                    handleSelectData();
                });

                $(".J_plus-btn, .J_minus-btn").on("click", function() {
                    var $this = $(this),
                        $parent = $this.parents("tr"),
                        $input = $parent.find(".J_num-input"),
                        $singlePrice = $parent.find(".singlePrice"),
                        $totalPrice = $parent.find(".totalPrice"),
                        num = parseInt($input.val());
                    if ($this.hasClass("J_plus-btn")) {
                        num = ++num;
                    } else if ($this.hasClass("J_minus-btn")) {
                        num = --num;
                    }
                    if (num <= 0) {
                        num = 0;
                    }
                    $input.val(num);
                    $totalPrice.html(num * $singlePrice.html());
                    handleSelectData();
                })

                //删除某一行
                $(".J_del-row").on("click", function() {
                        var flag = confirm("是否删除该条数据");
                        if (flag) {
                            var $parent = $(this).parents("tr");
                            $parent.remove();
                            handleSelectData();
                        }
                    })
                    //删除选中的行
                $(".J_del-checked").on("click", function() {
                    var checkTds = $(".J_check-elem:checked"),
                        i = 0,
                        length = checkTds.length;
                    if (length == 0) {
                        alert("请选择您要删除的数据");
                        return;
                    }
                    var flag = confirm("是否删除这些数据");
                    if (flag) {
                        for (i; i < length; i++) {
                            checkTds.eq(i).parents("tr").remove();
                        }
                        handleSelectData();
                    }
                });
                //复选框操作
                $(".J_check-all").on("click", function() {
                    var checked = $(this).prop("checked");
                    $(".J_check-all").prop("checked", checked);
                    $(".car-list-new").find("input[type='checkbox']").prop("checked", checked);
                    handleSelectData();
                });

                $(".J_check-elem-teach").on("click", function() {
                    var checked = $(this).prop("checked"),
                        oparent = $(this).parents(".car-list-new");
                    oparent.find("input[type='checkbox']").prop("checked", checked);
                    if (!checked) {
                        $(".J_check-all").prop("checked", false);
                    }
                    checkAll(".J_check-elem-teach");
                    handleSelectData();
                });

                $(".J_check-elem").on("click", function() {
                    var oparent = $(this).parents(".car-list-new"),
                        $elem = oparent.find(".J_check-elem"),
                        len = $elem.length,
                        n = 0;

                    $elem.each(function(index, obj) {
                        if ($(obj).prop("checked")) {
                            n++;
                        }
                    })

                    if (len === n) {
                        oparent.find(".J_check-elem-teach").prop("checked", true);
                    } else {
                        oparent.find(".J_check-elem-teach").prop("checked", false);
                    }

                    checkAll(".J_check-elem");
                    handleSelectData();
                })

                function checkAll(str) {
                    var $elem = $(".car-list-new").find(str);
                    var len = $elem.length,
                        n = 0;
                    $elem.each(function(index, obj) {
                        if ($(obj).prop("checked")) {
                            n++;
                        }
                    });
                    if (n === len) {
                        $(".J_check-all").prop("checked", true);
                    } else {
                        $(".J_check-all").prop("checked", false);
                    }
                }

                function handleSelectData() {
                    var n = 0,
                        price = 0;
                    var $elem = $(".J_check-elem");
                    $elem.each(function() {
                        if ($(this).prop("checked")) {
                            n++;
                            var $tr = $(this).parents("tr"),
                                $price = $tr.find(".totalPrice"),
                                total = $price.html();
                            price = (parseFloat(price) + parseFloat(total)).toFixed(2);
                        }
                    })

                    $(".J_selected-num").html(n);
                    $(".J_selected-price").html("￥" + price);

                }


            })
            </script>
            <div class="even">
                <div class="w_1140">
                    <div class="list-box clearfix">
                        <div class="left">
                            <div class="en">NEWEST</div>
                            <div class="cn">NEW YOURK</div>
                            <div class="line_1"></div>
                            <div class="line_2"></div>
                            <div class="more"><a href="">MORE...</a></div>
                        </div>
                        <div class="right">
                            <ul class="single clearfix">
                                <li>
                                    <div class="img">
                                        <a href="">
                                            <img src="http://placehold.it/252x247" alt="" />
                                        </a>
                                        <span class="price">￥10000.00</span>
                                    </div>
                                    <div class="name"><a href="">Beginner African Dance Classes</a></div>
                                    <div class="address">
                                        <i class="icon-address"></i>
                                        <span>NEW YORK</span>
                                    </div>
                                </li>
                                <li>
                                    <div class="img">
                                        <a href="">
                                            <img src="http://placehold.it/252x247" alt="" />
                                        </a>
                                        <span class="price">￥10000.00</span>
                                    </div>
                                    <div class="name"><a href="">Beginner African Dance Classes</a></div>
                                    <div class="address">
                                        <i class="icon-address"></i>
                                        <span>NEW YORK</span>
                                    </div>
                                </li>
                                <li>
                                    <div class="img">
                                        <a href="">
                                            <img src="http://placehold.it/252x247" alt="" />
                                        </a>
                                        <span class="price">￥10000.00</span>
                                    </div>
                                    <div class="name"><a href="">Beginner African Dance Classes</a></div>
                                    <div class="address">
                                        <i class="icon-address"></i>
                                        <span>NEW YORK</span>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div class="w_1140">
                    <div class="list-box clearfix">
                        <div class="left">
                            <div class="en">NEWEST</div>
                            <div class="cn">NEW YOURK</div>
                            <div class="line_1"></div>
                            <div class="line_2"></div>
                            <div class="more"><a href="">MORE...</a></div>
                        </div>
                        <div class="right">
                            <ul class="single clearfix">
                                <li>
                                    <div class="img">
                                        <a href="">
                                            <img src="http://placehold.it/252x247" alt="" />
                                        </a>
                                        <span class="price">￥10000.00</span>
                                    </div>
                                    <div class="name"><a href="">Beginner African Dance Classes</a></div>
                                    <div class="address">
                                        <i class="icon-address"></i>
                                        <span>NEW YORK</span>
                                    </div>
                                </li>
                                <li>
                                    <div class="img">
                                        <a href="">
                                            <img src="http://placehold.it/252x247" alt="" />
                                        </a>
                                        <span class="price">￥10000.00</span>
                                    </div>
                                    <div class="name"><a href="">Beginner African Dance Classes</a></div>
                                    <div class="address">
                                        <i class="icon-address"></i>
                                        <span>NEW YORK</span>
                                    </div>
                                </li>
                                <li>
                                    <div class="img">
                                        <a href="">
                                            <img src="http://placehold.it/252x247" alt="" />
                                        </a>
                                        <span class="price">￥10000.00</span>
                                    </div>
                                    <div class="name"><a href="">Beginner African Dance Classes</a></div>
                                    <div class="address">
                                        <i class="icon-address"></i>
                                        <span>NEW YORK</span>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="page-foot">
        <div class="layout">
            <div class="clearfix">
                <ul class="share clearfix">
                    <li class="c">
                        <a href="javascript:void(0)"></a>
                    </li>
                    <li class="weixin">
                        <a href="javascript:void(0)"></a>
                    </li>
                    <li class="qq">
                        <a href="javascript:void(0)"></a>
                    </li>
                    <li class="weibo">
                        <a href="javascript:void(0)"></a>
                    </li>
                </ul>
            </div>
            <div class="clearfix">
                <div class="logo">
                    <a href="#"><img src="images/logo2.png" alt="" /></a>
                </div>
                <ul class="info clearfix">
                    <li>
                        <dl>
                            <dt>关于我们</dt>
                            <dd><a href="#">/About</a></dd>
                            <dd><a href="#">/Gurus</a></dd>
                            <dd><a href="#">/Careers</a></dd>
                        </dl>
                    </li>
                    <li>
                        <dl>
                            <dt>合作伙伴</dt>
                            <dd><a href="#">/Working Together</a></dd>
                            <dd><a href="#">/Sign In to ZOZI Advance</a></dd>
                            <dd><a href="#">/Merchant Portal</a></dd>
                        </dl>
                    </li>
                    <li>
                        <dl>
                            <dt>关于我们</dt>
                            <dd><a href="#">/Email Us</a></dd>
                            <dd><a href="#">/(855)937-1616</a></dd>
                            <dd><a href="#">/Help</a></dd>
                        </dl>
                    </li>
                </ul>
            </div>
        </div>
        <div class="copyright">Copyright &copy; 2015 ZOZI.All Right Reserved.1 Beach St. Suite 300,San Francisco,CA 94133</div>
    </div>
</body>

</html>
